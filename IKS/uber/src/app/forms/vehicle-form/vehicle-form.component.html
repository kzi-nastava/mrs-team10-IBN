@if (showAsModal) {
<div class="modal-overlay" (click)="onClose()">
  <div class="modal-content" (click)="stopPropagation($event)">
    <div class="modal-header">
      <h2>ğŸš— My Vehicle Information</h2>
      <button class="close-btn" (click)="onClose()">âœ•</button>
    </div>

    <div class="modal-body">
      <input
        type="text"
        [(ngModel)]="vehicleData.model"
        placeholder="Vehicle model (e.g. Toyota Corolla)"
        (blur)="markFieldTouched('model')"
        [class.invalid]="isModelInvalid()"
      />
      @if (isModelInvalid()) {
      <div class="error">Vehicle model is required</div>
      }

      <label class="input-label">Vehicle type</label>
      <select
        [(ngModel)]="vehicleData.type"
        class="vehicle-select"
        (blur)="markFieldTouched('type')"
        [class.invalid]="isTypeInvalid()"
      >
        <option value="standard">Standard</option>
        <option value="luxury">Luxury</option>
        <option value="van">Van</option>
      </select>

      @if (isTypeInvalid()) {
      <div class="error">Vehicle type is required</div>
      }

      <input
        type="text"
        [(ngModel)]="vehicleData.licensePlate"
        placeholder="License plate"
        (blur)="markFieldTouched('licensePlate')"
        [class.invalid]="isPlateInvalid()"
      />

      @if (isPlateInvalid()) {
      <div class="error">License plate is required</div>
      }

      <label class="input-label">Number of seats</label>
      <input
        type="number"
        [(ngModel)]="vehicleData.seats"
        min="1"
        max="9"
        (blur)="markFieldTouched('seats')"
        [class.invalid]="isSeatsInvalid()"
      />

      @if (isSeatsInvalid()) {
      <div class="error">Seats must be between 1 and 9</div>
      }

      <div class="checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="vehicleData.babyTransport" />
          <span class="checkbox-text"> ğŸ‘¶ Baby transport </span>
        </label>

        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="vehicleData.petTransport" />
          <span class="checkbox-text"> ğŸ¾ Pet transport </span>
        </label>
      </div>

      <button
        class="send-vehicle-changes"
        (click)="onSubmit()"
        type="submit"
        [disabled]="isUnchanged()"
        [class.disabled-btn]="isUnchanged()"
      >
        {{ buttonLabel }}
      </button>
    </div>
  </div>
</div>
} @else {
<div class="card vehicle-card">
  <h3>ğŸš— Vehicle Information</h3>

  <input
    type="text"
    [(ngModel)]="vehicleData.model"
    placeholder="Vehicle model (e.g. Toyota Corolla)"
    (blur)="markFieldTouched('model')"
    [class.invalid]="isModelInvalid()"
  />
  @if (isModelInvalid()) {
  <div class="error">Vehicle model is required</div>
  }

  <label class="input-label">Vehicle type</label>
  <select
    [(ngModel)]="vehicleData.type"
    class="vehicle-select"
    (blur)="markFieldTouched('type')"
    [class.invalid]="isTypeInvalid()"
  >
    <option value="standard">Standard</option>
    <option value="luxury">Luxury</option>
    <option value="van">Van</option>
  </select>

  @if (isTypeInvalid()) {
  <div class="error">Vehicle type is required</div>
  }

  <input
    type="text"
    [(ngModel)]="vehicleData.licensePlate"
    placeholder="License plate"
    (blur)="markFieldTouched('licensePlate')"
    [class.invalid]="isPlateInvalid()"
  />

  @if (isPlateInvalid()) {
  <div class="error">License plate is required</div>
  }

  <label class="input-label">Number of seats</label>
  <input
    type="number"
    [(ngModel)]="vehicleData.seats"
    min="1"
    max="9"
    (blur)="markFieldTouched('seats')"
    [class.invalid]="isSeatsInvalid()"
  />

  @if (isSeatsInvalid()) {
  <div class="error">Seats must be between 1 and 9</div>
  }

  <div class="checkbox-group">
    <label class="checkbox-label">
      <input type="checkbox" [(ngModel)]="vehicleData.babyTransport" />
      <span class="checkbox-text"> ğŸ‘¶ Baby transport </span>
    </label>

    <label class="checkbox-label">
      <input type="checkbox" [(ngModel)]="vehicleData.petTransport" />
      <span class="checkbox-text"> ğŸ¾ Pet transport </span>
    </label>
  </div>
</div>
}
