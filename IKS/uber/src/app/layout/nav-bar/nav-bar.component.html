<!-- nav-bar.component.html -->
<div class="top">
  <button mat-icon-button (click)="drawer.toggle()" [style.display]="loggedIn ? 'inline' : 'none'">
    <mat-icon style="color: antiquewhite">menu</mat-icon>
  </button>

  <img class="nav-logo" src="logo.svg" [routerLink]="['/home']" />

  @if (!loggedIn) {
    <button class="form-button-one" [routerLink]="['/login']">Login</button>
    <button class="form-button-two" [routerLink]="['/register']">Register</button>
  } @else {
    <span class="example-spacer"></span>

    <div class="notification">
      <button
        mat-icon-button
        [routerLink]="['/notifications']"
        (click)="resetUnreadCount()"
        [matBadge]="unreadCount()"
        [matBadgeHidden]="unreadCount() === 0"
        matBadgeColor="warn"
        matBadgeSize="small"
        [attr.aria-label]="
          'View notifications' + (unreadCount() > 0 ? ', ' + unreadCount() + ' unread' : '')
        "
      >
        <mat-icon aria-hidden="false">notifications</mat-icon>
      </button>
    </div>
  }
</div>

<mat-sidenav-container [style.display]="loggedIn ? 'inline' : 'none'">
  <mat-sidenav #drawer mode="side" [opened]="false" class="sidebar">
    <div class="item" [routerLink]="['/account']">
      <mat-icon>account_circle</mat-icon>
      <span>My account</span>
    </div>

    <div class="separator"></div>

    @if (role == 'administrator') {
      <div class="item" [routerLink]="['/admin-chat']">
        <mat-icon>chat_bubble</mat-icon>
        <span>Chat support</span>
      </div>
    }

    @if (role == 'driver' || role == 'passenger') {
      <div class="item" [routerLink]="['/chat']">
        <mat-icon>chat_bubble</mat-icon>
        <span>Chat support</span>
      </div>
    }

    <div class="separator"></div>

    <div class="item" [routerLink]="['/ride-history']">
      <mat-icon>map</mat-icon>
      <span>Ride history</span>
    </div>

    <div class="separator"></div>

    <div class="item" [routerLink]="['/tracking-route']">
      <mat-icon>directions_car</mat-icon>
      <span>Tracking ride</span>
    </div>

    <div class="separator"></div>

    @if (role == 'driver') {
      <div class="item" [routerLink]="['/incoming-ride']">
        <mat-icon>access_time</mat-icon>
        <span>Incoming ride</span>
      </div>

      <div class="separator"></div>
    }

    <button class="logout-btn" (click)="logout()">Log out</button>
  </mat-sidenav>

  <mat-sidenav-content class="content"></mat-sidenav-content>
</mat-sidenav-container>

<div *ngIf="successMessage()" class="message success-message">
  {{ successMessage() }}
</div>
<div *ngIf="errorMessage()" class="message error-message">
  {{ errorMessage() }}
</div>
<div *ngIf="panicMessage()" class="message panic-message">
  {{ panicMessage() }}
</div>
